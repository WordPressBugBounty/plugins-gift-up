(()=>{"use strict";const t=window.React,e=window.wc.blocksCheckout,n=window.wp.element,a=window.wp.i18n,l=window.wc.blocksComponents,o=window.wp.components,c=window.wp.data,p=JSON.parse('{"apiVersion":3,"name":"giftup/apply-gift-cards","version":"2.0.0","title":"Enter a Gift Up gift card code","category":"woocommerce","description":"Adds a way for your customers to enter a Gift Up gift card during checkout.","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-order-summary-block","woocommerce/cart-order-summary-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":false}},"text":{"type":"string","source":"html","selector":".wp-block-giftup-block-checkout-newsletter-subscription","default":""}},"textdomain":"gift-up","editorScript":"giftup-apply-block-editor","viewScript":"giftup-apply-block-frontend"}');(0,e.registerCheckoutBlock)({metadata:p,component:({children:e,checkoutExtensionData:p})=>{const[r,i]=(0,n.useState)(""),[s,m]=(0,n.useState)(!1),[u,d]=(0,n.useState)(""),{extensionCartUpdate:g}=window.wc.blocksCheckout,{setValidationErrors:f,clearValidationError:w}=(0,c.useDispatch)("wc/store/validation"),b=(0,c.useSelect)((t=>t("wc/store/cart").getCartData()));Number(b.totals.total_price);let h=b.extensions["giftup-apply-block"],_=0;h&&(_=100*h.giftcard_applied_balance,s&&r&&h.giftcard_not_found&&(d((0,a.__)("Gift card not found","gift-up")),m(!1)));const k=()=>{h.giftcard_code=null,h.giftcard_not_found=null;let t={giftCardCode:r};d(""),m(!0),g({namespace:"giftup-apply-code",data:t})};let y,E,v,x;return u&&(y=(0,t.createElement)("div",{className:"wc-block-components-validation-error giftup-apply-error"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"}))," ",(0,t.createElement)("span",null,u))),E=s?(0,t.createElement)(o.Spinner,null):(0,t.createElement)("span",{className:"wc-block-components-button__text"},(0,a.__)("Apply","gift-up")),h&&h.giftcard_code||(v=(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.Panel,{className:"giftup-apply-panel wc-block-components-totals-coupon "+(u?"has-error":""),title:(0,a.__)("Have a gift card?","gift-up"),titleTag:"div"},(0,t.createElement)("div",{className:"giftup-apply-panel-form"},(0,t.createElement)("div",{className:"giftup-apply-input"},(0,t.createElement)(l.ValidatedTextInput,{autoFocus:!0,id:"giftcard-code",value:r,onKeyPress:t=>{d(""),"Enter"===t.key&&k()},label:(0,a.__)("Gift card code","gift-up"),customValidation:()=>!u,className:u?"has-error":"",onChange:t=>i(t)})),(0,t.createElement)(l.Button,{className:"giftup-apply-button",disabled:r.length<1,onClick:k,type:"button"},E)),y))),v=(0,t.createElement)(l.TotalsWrapper,null,v),_&&(x=(0,t.createElement)(l.TotalsWrapper,{className:"giftup-apply-panel"},(0,t.createElement)(l.TotalsItem,{value:-_,label:(0,a.__)("Gift card","gift-up")+":",className:"wc-block-components-totals-discount",description:(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-block-components-chip wc-block-components-chip--radius-large"},(0,t.createElement)("span",{className:"wc-block-components-chip__text"},h.giftcard_code),(0,t.createElement)("button",{className:"giftup-remove-button wc-block-components-chip__remove",onClick:()=>{g({namespace:"giftup-remove-code"}),d(""),i(""),m(!1)},type:"button"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",className:"wc-block-components-chip__remove-icon","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),(0,t.createElement)("div",null,(0,t.createElement)("strong",null,(0,a.__)("Available balance","gift-up"),":")," ",(0,t.createElement)("span",null,h.giftcard_balance)))}))),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("style",null,"\n\t\t\t\t\t.giftup-apply-panel {\n\t\t\t\t\t\t\n\t\t\t\t\t\t.wc-block-components-panel__content {\n\t\t\t\t\t\t\t.giftup-apply-panel-form {\n\t\t\t\t\t\t\t\tmargin-bottom:0;\n\t\t\t\t\t\t\t\tpadding-bottom: 0;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\t\t\t\tgap: 8px;\n\t\t\t\t\t\t\t\twidth: 100%;\n\n\t\t\t\t\t\t\t\t.giftup-apply-input{\n\t\t\t\t\t\t\t\t\tmargin-top:0;\n\t\t\t\t\t\t\t\t\tflex: 3 1 140px;\n\n\t\t\t\t\t\t\t\t\t.wc-block-components-text-input {\n\t\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t.giftup-apply-button {\n\t\t\t\t\t\t\t\t\tflex: 1 1 auto;\n\t\t\t\t\t\t\t\t\tpadding-left: 16px;\n\t\t\t\t\t\t\t\t\tpadding-right: 16px;\n\t\t\t\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.giftup-apply-error {\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tgap: 2px;\n\t\t\t\t\t\t\tline-height: 1;\n\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.wc-block-components-chip__text {\n\t\t\t\t\t\t\tpadding-right: 0.5em;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t"),v,x)}})})();